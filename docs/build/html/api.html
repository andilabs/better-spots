

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>API &mdash; betterSpots 1.0 documentation</title>
  

  
  

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  
        <link rel="author" title="About these documents"
              href="about.html"/>
    <link rel="top" title="betterSpots 1.0 documentation" href="index.html"/>
        <link rel="next" title="Google Places API" href="google_places_api.html"/>
        <link rel="prev" title="DevOps" href="devops.html"/> 

  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.6.2/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        <a href="index.html" class="fa fa-home"> betterSpots</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
        
            <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="devops.html">DevOps</a><ul>
<li class="toctree-l2"><a class="reference internal" href="devops.html#scripts">Scripts</a></li>
<li class="toctree-l2"><a class="reference internal" href="devops.html#apache">Apache</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="">API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#authentication">authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="#nearby-spots-list">nearby spots list</a></li>
<li class="toctree-l2"><a class="reference internal" href="#spots-list">spots list</a></li>
<li class="toctree-l2"><a class="reference internal" href="#add-new-spot">add new spot</a></li>
<li class="toctree-l2"><a class="reference internal" href="#spot">spot</a></li>
<li class="toctree-l2"><a class="reference internal" href="#delete-spot">delete spot</a></li>
<li class="toctree-l2"><a class="reference internal" href="#update-spot">update spot</a></li>
<li class="toctree-l2"><a class="reference internal" href="#image-upload">image upload</a></li>
<li class="toctree-l2"><a class="reference internal" href="#favourites-spots-list">favourites spots list</a></li>
<li class="toctree-l2"><a class="reference internal" href="#add-spot-to-favourites">add spot to favourites</a></li>
<li class="toctree-l2"><a class="reference internal" href="#delete-spot-from-favourites">delete spot from favourites</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ratings-list">ratings list</a></li>
<li class="toctree-l2"><a class="reference internal" href="#rate-spot">rate spot</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="google_places_api.html">Google Places API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="google_places_api.html#places-api-endpoint">places API endpoint</a></li>
<li class="toctree-l2"><a class="reference internal" href="google_places_api.html#places-nearby-search">places nearby search</a></li>
<li class="toctree-l2"><a class="reference internal" href="google_places_api.html#place-detail">place detail</a></li>
<li class="toctree-l2"><a class="reference internal" href="google_places_api.html#place-photo">place photo</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="foursquare_api.html">foursquare API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="foursquare_api.html#venues-api-endpoint">venues API endpoint</a></li>
<li class="toctree-l2"><a class="reference internal" href="foursquare_api.html#categories">categories</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="facebook_graph_api_nearby.html">facebook graph API - nearby</a><ul>
<li class="toctree-l2"><a class="reference internal" href="facebook_graph_api_nearby.html#graph-api-endpoint">graph api endpoint</a></li>
<li class="toctree-l2"><a class="reference internal" href="facebook_graph_api_nearby.html#nearby-search">nearby search</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="facebook_graph_api_auth.html">facebook graph API - authentication</a><ul>
<li class="toctree-l2"><a class="reference internal" href="facebook_graph_api_auth.html#graph-api-endpoint">graph api endpoint</a></li>
<li class="toctree-l2"><a class="reference internal" href="facebook_graph_api_auth.html#get-oauth-token">get oAuth token</a></li>
<li class="toctree-l2"><a class="reference internal" href="facebook_graph_api_auth.html#facebook-login-for-the-web-with-the-javascript-sdk">Facebook Login for the Web with the JavaScript SDK</a></li>
<li class="toctree-l2"><a class="reference internal" href="facebook_graph_api_auth.html#validate-token-and-userid">validate token and userID</a></li>
<li class="toctree-l2"><a class="reference internal" href="facebook_graph_api_auth.html#html-js">HTML + JS</a></li>
</ul>
</li>
</ul>

        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">betterSpots</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>API</li>
      <li class="wy-breadcrumbs-aside">
        
          <a href="_sources/api.txt" rel="nofollow"> View page source</a>
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            
  <div class="section" id="api">
<h1>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h1>
<div class="section" id="authentication">
<h2>authentication<a class="headerlink" href="#authentication" title="Permalink to this headline">¶</a></h2>
<dl class="post">
<dt id="post--api-authentication">
<tt class="descname">POST </tt><tt class="descname">/api/authentication</tt><a class="headerlink" href="#post--api-authentication" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>email</strong> &#8211; user email</li>
<li><strong>password</strong> &#8211; user plain text password</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p><strong>Example CURL request</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre>curl -X POST http://127.0.0.1:8000/api/authentication -d &quot;email=andi@andilabs.com&amp;password=somepass&quot;
</pre></div>
</div>
<p><strong>Example response</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre>{&quot;token&quot;: &quot;56a06f4c57817518fdef216fdfd1118250ca069f&quot;}
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">statuscode 200:</th><td class="field-body">user sucessfully authenticated</td>
</tr>
<tr class="field-even field"><th class="field-name">statuscode 401:</th><td class="field-body">user UNAUTHORIZED</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="nearby-spots-list">
<h2>nearby spots list<a class="headerlink" href="#nearby-spots-list" title="Permalink to this headline">¶</a></h2>
<dl class="get">
<dt id="get--api-nearby-(float-lat)-(float-lng)-(int-radius)">
<tt class="descname">GET </tt><tt class="descname">/api/nearby/</tt><big>(</big><em class="property">float: </em><em>lat</em><big>)</big><tt class="descname">/</tt><big>(</big><em class="property">float: </em><em>lng</em><big>)</big><tt class="descname">/</tt><big>(</big><em class="property">int: </em><em>radius</em><big>)</big><a class="headerlink" href="#get--api-nearby-(float-lat)-(float-lng)-(int-radius)" title="Permalink to this definition">¶</a></dt>
<dd><table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>lat</strong> &#8211; latitude in exact format: d{2,3}.d{5}</li>
<li><strong>lng</strong> &#8211; longitude in exact format: d{2,3}.d{5}</li>
<li><strong>radius</strong> &#8211; desired radius, if not provided default 5000m will be used</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<p><strong>Example CURL request</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre>curl -X GET http://127.0.0.1:8000/api/nearby/52.18654/21.01687/3500
</pre></div>
</div>
<p><strong>Example response</strong>:</p>
<div class="highlight-json"><div class="highlight"><pre><span class="p">{</span>
  <span class="nt">&quot;count&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="nt">&quot;next&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="nt">&quot;previous&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
  <span class="nt">&quot;results&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://127.0.0.1:8000/api/spots/7/&quot;</span><span class="p">,</span>
      <span class="nt">&quot;www_url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://127.0.0.1:8000/spots/7/jeffs-restaurant-warszawa-zwirki-i-wigory-32/&quot;</span><span class="p">,</span>
      <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
      <span class="nt">&quot;thumbnail_venue_photo&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
      <span class="nt">&quot;distance&quot;</span><span class="p">:</span> <span class="mf">3.3414842332930004</span><span class="p">,</span>
      <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Jeffs&quot;</span><span class="p">,</span>
      <span class="nt">&quot;location&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;latitude&quot;</span><span class="p">:</span> <span class="mf">52.21104</span><span class="p">,</span>
        <span class="nt">&quot;longitude&quot;</span><span class="p">:</span> <span class="mf">20.98848</span>
      <span class="p">},</span>
      <span class="nt">&quot;address_street&quot;</span><span class="p">:</span> <span class="s2">&quot;Żwirki i Wigóry&quot;</span><span class="p">,</span>
      <span class="nt">&quot;address_number&quot;</span><span class="p">:</span> <span class="s2">&quot;32&quot;</span><span class="p">,</span>
      <span class="nt">&quot;address_city&quot;</span><span class="p">:</span> <span class="s2">&quot;Warszawa&quot;</span><span class="p">,</span>
      <span class="nt">&quot;address_country&quot;</span><span class="p">:</span> <span class="s2">&quot;Polska&quot;</span><span class="p">,</span>
      <span class="nt">&quot;spot_type&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
      <span class="nt">&quot;is_accepted&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
      <span class="nt">&quot;phone_number&quot;</span><span class="p">:</span> <span class="s2">&quot;22 825 16 50&quot;</span><span class="p">,</span>
      <span class="nt">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
      <span class="nt">&quot;www&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
      <span class="nt">&quot;facebook&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
      <span class="nt">&quot;is_enabled&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nt">&quot;friendly_rate&quot;</span><span class="p">:</span> <span class="s2">&quot;1.00&quot;</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This view uses pagination. If the number of results for given query exeeds the defined in settings MAX_SPOTS_PER_PAGE the pagination will be used. The next parameter will contain link to next page of results. Next page will contain previous filed containg link to previous page.</p>
</div>
<p><strong>Pagination:</strong></p>
<dl class="get">
<dt id="get--api-nearby-(float-lat)-(float-lng)-(int-radius)?page=(int-page_number)">
<tt class="descname">GET </tt><tt class="descname">/api/nearby/</tt><big>(</big><em class="property">float: </em><em>lat</em><big>)</big><tt class="descname">/</tt><big>(</big><em class="property">float: </em><em>lng</em><big>)</big><tt class="descname">/</tt><big>(</big><em class="property">int: </em><em>radius</em><big>)</big><tt class="descname">?page=</tt><big>(</big><em class="property">int: </em><em>page_number</em><big>)</big><a class="headerlink" href="#get--api-nearby-(float-lat)-(float-lng)-(int-radius)?page=(int-page_number)" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="spots-list">
<h2>spots list<a class="headerlink" href="#spots-list" title="Permalink to this headline">¶</a></h2>
<dl class="get">
<dt id="get--api-spots">
<tt class="descname">GET </tt><tt class="descname">/api/spots</tt><a class="headerlink" href="#get--api-spots" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns list of all spots.</p>
</dd></dl>

<p><strong>Example CURL request</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre>curl -X GET http://127.0.0.1:8000/api/spots/
</pre></div>
</div>
<p><strong>Example response</strong>:</p>
<div class="highlight-json"><div class="highlight"><pre><span class="p">[</span>
  <span class="p">{</span>
    <span class="nt">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://127.0.0.1:8000/api/spots/2/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;www_url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://127.0.0.1:8000/spots/2/kafka-cafe-warszawa-obozna-3/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
    <span class="nt">&quot;thumbnail_venue_photo&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Kafka&quot;</span><span class="p">,</span>
    <span class="nt">&quot;location&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;latitude&quot;</span><span class="p">:</span> <span class="mf">52.23959</span><span class="p">,</span>
      <span class="nt">&quot;longitude&quot;</span><span class="p">:</span> <span class="mf">21.02276</span>
    <span class="p">},</span>
    <span class="nt">&quot;address_street&quot;</span><span class="p">:</span> <span class="s2">&quot;Oboźna&quot;</span><span class="p">,</span>
    <span class="nt">&quot;address_number&quot;</span><span class="p">:</span> <span class="s2">&quot;3&quot;</span><span class="p">,</span>
    <span class="nt">&quot;address_city&quot;</span><span class="p">:</span> <span class="s2">&quot;Warszawa&quot;</span><span class="p">,</span>
    <span class="nt">&quot;address_country&quot;</span><span class="p">:</span> <span class="s2">&quot;Polska&quot;</span><span class="p">,</span>
    <span class="nt">&quot;spot_type&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nt">&quot;is_accepted&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;phone_number&quot;</span><span class="p">:</span> <span class="s2">&quot;22 826 08 22&quot;</span><span class="p">,</span>
    <span class="nt">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;kafka@kafka.com.pl&quot;</span><span class="p">,</span>
    <span class="nt">&quot;www&quot;</span><span class="p">:</span> <span class="s2">&quot;http://www.kawiarnia-kafka.pl/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;facebook&quot;</span><span class="p">:</span> <span class="s2">&quot;Kawiarnia.Kafka&quot;</span><span class="p">,</span>
    <span class="nt">&quot;is_enabled&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;friendly_rate&quot;</span><span class="p">:</span> <span class="s2">&quot;5.00&quot;</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nt">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://127.0.0.1:8000/api/spots/3/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;www_url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://127.0.0.1:8000/spots/3/pardon-to-tu-cafe-warszawa-pl-grzybowski-1216/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
    <span class="nt">&quot;thumbnail_venue_photo&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Pardon to tu&quot;</span><span class="p">,</span>
    <span class="nt">&quot;location&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;latitude&quot;</span><span class="p">:</span> <span class="mf">52.23626</span><span class="p">,</span>
      <span class="nt">&quot;longitude&quot;</span><span class="p">:</span> <span class="mf">21.00269</span>
    <span class="p">},</span>
    <span class="nt">&quot;address_street&quot;</span><span class="p">:</span> <span class="s2">&quot;Pl. Grzybowski&quot;</span><span class="p">,</span>
    <span class="nt">&quot;address_number&quot;</span><span class="p">:</span> <span class="s2">&quot;12/16&quot;</span><span class="p">,</span>
    <span class="nt">&quot;address_city&quot;</span><span class="p">:</span> <span class="s2">&quot;Warszawa&quot;</span><span class="p">,</span>
    <span class="nt">&quot;address_country&quot;</span><span class="p">:</span> <span class="s2">&quot;Polska&quot;</span><span class="p">,</span>
    <span class="nt">&quot;spot_type&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nt">&quot;is_accepted&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;phone_number&quot;</span><span class="p">:</span> <span class="s2">&quot;513191641&quot;</span><span class="p">,</span>
    <span class="nt">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;www&quot;</span><span class="p">:</span> <span class="s2">&quot;http://www.pardontotu.pl/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;facebook&quot;</span><span class="p">:</span> <span class="s2">&quot;pardontotu&quot;</span><span class="p">,</span>
    <span class="nt">&quot;is_enabled&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;friendly_rate&quot;</span><span class="p">:</span> <span class="s2">&quot;5.00&quot;</span>
  <span class="p">},</span>
  <span class="p">{</span>
    <span class="nt">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://127.0.0.1:8000/api/spots/1/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;www_url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://127.0.0.1:8000/spots/1/cafe-kulturalna-cafe-warszawa-plac-defilad-1/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nt">&quot;thumbnail_venue_photo&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Cafe Kulturalna&quot;</span><span class="p">,</span>
    <span class="nt">&quot;location&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;latitude&quot;</span><span class="p">:</span> <span class="mf">52.23177</span><span class="p">,</span>
      <span class="nt">&quot;longitude&quot;</span><span class="p">:</span> <span class="mf">21.00662</span>
    <span class="p">},</span>
    <span class="nt">&quot;address_street&quot;</span><span class="p">:</span> <span class="s2">&quot;Plac Defilad&quot;</span><span class="p">,</span>
    <span class="nt">&quot;address_number&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
    <span class="nt">&quot;address_city&quot;</span><span class="p">:</span> <span class="s2">&quot;Warszawa&quot;</span><span class="p">,</span>
    <span class="nt">&quot;address_country&quot;</span><span class="p">:</span> <span class="s2">&quot;Polska&quot;</span><span class="p">,</span>
    <span class="nt">&quot;spot_type&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nt">&quot;is_accepted&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;phone_number&quot;</span><span class="p">:</span> <span class="s2">&quot;22 656 62 81&quot;</span><span class="p">,</span>
    <span class="nt">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;justyna@kulturalna.pl&quot;</span><span class="p">,</span>
    <span class="nt">&quot;www&quot;</span><span class="p">:</span> <span class="s2">&quot;http://www.kulturalna.pl/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;facebook&quot;</span><span class="p">:</span> <span class="s2">&quot;CafeKulturalna&quot;</span><span class="p">,</span>
    <span class="nt">&quot;is_enabled&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;friendly_rate&quot;</span><span class="p">:</span> <span class="s2">&quot;3.00&quot;</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="add-new-spot">
<h2>add new spot<a class="headerlink" href="#add-new-spot" title="Permalink to this headline">¶</a></h2>
<dl class="post">
<dt id="post--api-spots">
<tt class="descname">POST </tt><tt class="descname">/api/spots</tt><a class="headerlink" href="#post--api-spots" title="Permalink to this definition">¶</a></dt>
<dd><p>Add new spot.</p>
<p>required fields:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; string</li>
<li><strong>point</strong> &#8211; in form of dictionary {&#8220;latitude&#8221;: dd.ddddd, &#8220;longitude&#8221;: dd.ddddd}</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>other fields are optional.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Request Headers:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.8">Authorization</a> &#8211; must provide token to authenticate or be session authenticated</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Example CURL request</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre>curl -X POST http://127.0.0.1:8000/api/spots/ -H &#39;Authorization: Token 66445bc0e3a422f377129ddd79e8dd384e4d8a4a&#39; -H &#39;Content-Type:application/json&#39; -d &#39;{
  &quot;name&quot;: &quot;Some New Spot&quot;,
  &quot;location&quot;: {
    &quot;latitude&quot;: 52.23177,
    &quot;longitude&quot;: 21.00662
  },
  &quot;address_street&quot;: &quot;Newestreet&quot;,
  &quot;address_number&quot;: &quot;7&quot;,
  &quot;address_city&quot;: &quot;Warsaw&quot;,
  &quot;address_country&quot;: &quot;Poland&quot;,
  &quot;spot_type&quot;: 1,
  &quot;is_accepted&quot;: true,
  &quot;phone_number&quot;: &quot;22 000 00 00&quot;,
  &quot;email&quot;: &quot;foo@bar.com&quot;,
  &quot;www&quot;: &quot;http://www.foo.bar/&quot;,
  &quot;facebook&quot;: &quot;FooBarFacebook&quot;,
  &quot;facilities&quot;: {
    &quot;kids_menu&quot;: null,
    &quot;playroom&quot;: null,
    &quot;baby_changing&quot;: true
  }
}&#39;
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="spot">
<h2>spot<a class="headerlink" href="#spot" title="Permalink to this headline">¶</a></h2>
<dl class="get">
<dt id="get--api-spots-(int-pk)-">
<tt class="descname">GET </tt><tt class="descname">/api/spots/</tt><big>(</big><em class="property">int: </em><em>pk</em><big>)</big><tt class="descname">/</tt><a class="headerlink" href="#get--api-spots-(int-pk)-" title="Permalink to this definition">¶</a></dt>
<dd><p>Get single spot details. All nested rating, comments and facilities evaluations.</p>
<p><strong>Example CURL request</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre>curl -X GET http://127.0.0.1:8000/api/spots/2/
</pre></div>
</div>
<p><strong>Example response</strong>:</p>
<div class="highlight-json"><div class="highlight"><pre><span class="p">{</span>
    <span class="nt">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://127.0.0.1:8000/api/spots/8/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;www_url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://127.0.0.1:8000/spots/8/drukarnia-jazz-club-cafe-krakow-nadwislanska-1/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;id&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">,</span>
    <span class="nt">&quot;thumbnail_venue_photo&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="nt">&quot;location&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;latitude&quot;</span><span class="p">:</span> <span class="mf">50.04608</span><span class="p">,</span>
        <span class="nt">&quot;longitude&quot;</span><span class="p">:</span> <span class="mf">19.94929</span>
    <span class="p">},</span>
    <span class="nt">&quot;ratings&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="nt">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://127.0.0.1:8000/api/ratings/2/&quot;</span><span class="p">,</span>
            <span class="nt">&quot;is_enabled&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="nt">&quot;friendly_rate&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
            <span class="nt">&quot;spot&quot;</span><span class="p">:</span> <span class="s2">&quot;http://127.0.0.1:8000/api/spots/8/&quot;</span><span class="p">,</span>
            <span class="nt">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;http://127.0.0.1:8000/api/users/1/&quot;</span><span class="p">,</span>
            <span class="nt">&quot;opinion&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
            <span class="nt">&quot;facilities&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;kids_menu&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
                <span class="nt">&quot;playroom&quot;</span><span class="p">:</span> <span class="s2">&quot;False&quot;</span><span class="p">,</span>
                <span class="nt">&quot;baby_changing&quot;</span><span class="p">:</span> <span class="s2">&quot;True&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://127.0.0.1:8000/api/ratings/4/&quot;</span><span class="p">,</span>
            <span class="nt">&quot;is_enabled&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
            <span class="nt">&quot;friendly_rate&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span>
            <span class="nt">&quot;spot&quot;</span><span class="p">:</span> <span class="s2">&quot;http://127.0.0.1:8000/api/spots/8/&quot;</span><span class="p">,</span>
            <span class="nt">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;http://127.0.0.1:8000/api/users/2/&quot;</span><span class="p">,</span>
            <span class="nt">&quot;opinion&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
            <span class="nt">&quot;facilities&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;kids_menu&quot;</span><span class="p">:</span> <span class="s2">&quot;True&quot;</span><span class="p">,</span>
                <span class="nt">&quot;playroom&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
                <span class="nt">&quot;baby_changing&quot;</span><span class="p">:</span> <span class="s2">&quot;False&quot;</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="nt">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://127.0.0.1:8000/api/ratings/7/&quot;</span><span class="p">,</span>
            <span class="nt">&quot;is_enabled&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="nt">&quot;friendly_rate&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="nt">&quot;spot&quot;</span><span class="p">:</span> <span class="s2">&quot;http://127.0.0.1:8000/api/spots/8/&quot;</span><span class="p">,</span>
            <span class="nt">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;http://127.0.0.1:8000/api/users/3/&quot;</span><span class="p">,</span>
            <span class="nt">&quot;opinion&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
            <span class="nt">&quot;facilities&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="nt">&quot;kids_menu&quot;</span><span class="p">:</span> <span class="s2">&quot;True&quot;</span><span class="p">,</span>
                <span class="nt">&quot;playroom&quot;</span><span class="p">:</span> <span class="s2">&quot;True&quot;</span><span class="p">,</span>
                <span class="nt">&quot;baby_changing&quot;</span><span class="p">:</span> <span class="kc">null</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">],</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Drukarnia Jazz Club&quot;</span><span class="p">,</span>
    <span class="nt">&quot;address_street&quot;</span><span class="p">:</span> <span class="s2">&quot;Nadwiślańska&quot;</span><span class="p">,</span>
    <span class="nt">&quot;address_number&quot;</span><span class="p">:</span> <span class="s2">&quot;1&quot;</span><span class="p">,</span>
    <span class="nt">&quot;address_city&quot;</span><span class="p">:</span> <span class="s2">&quot;Kraków&quot;</span><span class="p">,</span>
    <span class="nt">&quot;address_country&quot;</span><span class="p">:</span> <span class="s2">&quot;Polska&quot;</span><span class="p">,</span>
    <span class="nt">&quot;spot_type&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="nt">&quot;is_accepted&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;phone_number&quot;</span><span class="p">:</span> <span class="s2">&quot;12 656 65 60&quot;</span><span class="p">,</span>
    <span class="nt">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;drukarnia@drukarniaclub.pl&quot;</span><span class="p">,</span>
    <span class="nt">&quot;www&quot;</span><span class="p">:</span> <span class="s2">&quot;http://www.drukarniaclub.pl/&quot;</span><span class="p">,</span>
    <span class="nt">&quot;facebook&quot;</span><span class="p">:</span> <span class="s2">&quot;DrukarniaJazzClub&quot;</span><span class="p">,</span>
    <span class="nt">&quot;is_enabled&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;friendly_rate&quot;</span><span class="p">:</span> <span class="s2">&quot;3.00&quot;</span><span class="p">,</span>
    <span class="nt">&quot;venue_photo&quot;</span><span class="p">:</span> <span class="s2">&quot;http://127.0.0.1:8000/media/img/b22d1ba742aa425baa3665ee8eec0f77&quot;</span><span class="p">,</span>
    <span class="nt">&quot;cropping_venue_photo&quot;</span><span class="p">:</span> <span class="s2">&quot;0,33,620,298&quot;</span><span class="p">,</span>
    <span class="nt">&quot;facilities&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;playroom&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nt">&quot;toilet_enabled&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;tables_enabled&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;entrance_enabled&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;baby_changing&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nt">&quot;kids_menu&quot;</span><span class="p">:</span> <span class="kc">true</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="delete-spot">
<h2>delete spot<a class="headerlink" href="#delete-spot" title="Permalink to this headline">¶</a></h2>
<dl class="delete">
<dt id="delete--api-spots-(int-pk)-">
<tt class="descname">DELETE </tt><tt class="descname">/api/spots/</tt><big>(</big><em class="property">int: </em><em>pk</em><big>)</big><tt class="descname">/</tt><a class="headerlink" href="#delete--api-spots-(int-pk)-" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete single spot</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pk</strong> &#8211; pk of spot</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Request Headers:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.8">Authorization</a> &#8211; must provide token to authenticate or be session authenticated</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>The user must be admin.</p>
<p><strong>Example CURL request</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre>curl -X DELETE http://127.0.0.1:8000/api/spots/13/ -H &quot;Authorization: Token 66445bc0e3a422f377129ddd79e8dd384e4d8a4a&quot;
</pre></div>
</div>
<p><strong>Example response</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.0</span> <span class="m">204</span> <span class="ne">NO CONTENT</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="update-spot">
<h2>update spot<a class="headerlink" href="#update-spot" title="Permalink to this headline">¶</a></h2>
<dl class="put">
<dt id="put--api-spots-(int-pk)-">
<tt class="descname">PUT </tt><tt class="descname">/api/spots/</tt><big>(</big><em class="property">int: </em><em>pk</em><big>)</big><tt class="descname">/</tt><a class="headerlink" href="#put--api-spots-(int-pk)-" title="Permalink to this definition">¶</a></dt>
<dd><p>Update single spot</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pk</strong> &#8211; pk of spot</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Request Headers:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.8">Authorization</a> &#8211; must provide token to authenticate or be session authenticated</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p>The user must be admin.</p>
<p><strong>Example CURL request</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre> curl -X PUT http://127.0.0.1:8000/api/spots/2/ -H &#39;Content-Type:application/json&#39; -H &#39;Authorization: Token 66445bc0e3a422f377129ddd79e8dd384e4d8a4a&#39; -d &#39;{
  &quot;url&quot;: &quot;http://127.0.0.1:8000/api/spots/2/ SOME UPDATE&quot;,
  &quot;www_url&quot;: &quot;http://127.0.0.1:8000/spots/2/kafka-cafe-warszawa-obozowa-3/&quot;,
  &quot;id&quot;: 2,
  &quot;thumbnail_venue_photo&quot;: null,
  &quot;ratings&quot;: [],
  &quot;name&quot;: &quot;Kafka SOME UPDATE&quot;,
  &quot;location&quot;: {
    &quot;latitude&quot;: 52.23959,
    &quot;longitude&quot;: 21.02276
  },
  &quot;address_street&quot;: &quot;Oboźna SOME UPDATE&quot;,
  &quot;address_number&quot;: &quot;3&quot;,
  &quot;address_city&quot;: &quot;Warszawa SOME UPDATE&quot;,
  &quot;address_country&quot;: &quot;POLAND SOME UPDATE&quot;,
  &quot;spot_type&quot;: 1,
  &quot;is_accepted&quot;: true,
  &quot;phone_number&quot;: &quot;22 826 08 22&quot;,
  &quot;email&quot;: &quot;kafka@kafka.com.pl&quot;,
  &quot;www&quot;: &quot;http://www.kawiarnia-kafka.pl/&quot;,
  &quot;facebook&quot;: &quot;Kawiarnia.Kafka SOME UPDATE&quot;,
  &quot;venue_photo&quot;: null,
  &quot;cropping_venue_photo&quot;: &quot;0,52,458,249&quot;,
  &quot;spot_slug&quot;: &quot;kafka-cafe-warszawa-obozowa-3&quot;
}&#39;
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="image-upload">
<h2>image upload<a class="headerlink" href="#image-upload" title="Permalink to this headline">¶</a></h2>
<dl class="post">
<dt id="post--api-image_upload-(int-pk)-">
<tt class="descname">POST </tt><tt class="descname">/api/image_upload/</tt><big>(</big><em class="property">int: </em><em>pk</em><big>)</big><tt class="descname">/</tt><a class="headerlink" href="#post--api-image_upload-(int-pk)-" title="Permalink to this definition">¶</a></dt>
<dd><p>Upload photo for spot</p>
<p>required fields:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pk</strong> &#8211; pk of spot</li>
<li><strong>file</strong> &#8211; image file</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Request Headers:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.8">Authorization</a> &#8211; must provide token to authenticate or be session authenticated</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Example CURL request</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre>curl -X POST -H &quot;Authorization: Token 66445bc0e3a422f377129ddd79e8dd384e4d8a4a&quot; -F &quot;file=@/Users/andi/Desktop/dog.jpg;type=image/jpeg&quot; http://127.0.0.1:8000/api/image_upload/1/
</pre></div>
</div>
<p><strong>Example response</strong>:</p>
<div class="highlight-json"><div class="highlight"><pre><span class="p">{</span><span class="nt">&quot;file_url&quot;</span><span class="p">:</span><span class="s2">&quot;/media/img/64ad3bc3f06f45a9abcdd8167608faee.350x150_q85_box-0%2C936%2C2448%2C1985_crop_detail.jpg&quot;</span><span class="p">}</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="favourites-spots-list">
<h2>favourites spots list<a class="headerlink" href="#favourites-spots-list" title="Permalink to this headline">¶</a></h2>
<dl class="get">
<dt id="get--api-favourites_spots-">
<tt class="descname">GET </tt><tt class="descname">/api/favourites_spots/</tt><a class="headerlink" href="#get--api-favourites_spots-" title="Permalink to this definition">¶</a></dt>
<dd><p>Get list of favourites spots for authenticated user</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name" colspan="2">Request Headers:</th></tr>
<tr class="field-odd field"><td>&nbsp;</td><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.8">Authorization</a> &#8211; must provide token to authenticate or be session authenticated</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Example CURL request</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre>curl -X GET -H &quot;Authorization: Token f5d7d38342a2c23c2205a660f4e3ff0464b9a882&quot; http://127.0.0.1:8000/api/favourites_spots/
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="add-spot-to-favourites">
<h2>add spot to favourites<a class="headerlink" href="#add-spot-to-favourites" title="Permalink to this headline">¶</a></h2>
<dl class="post">
<dt id="post--api-favourites_spots-">
<tt class="descname">POST </tt><tt class="descname">/api/favourites_spots/</tt><a class="headerlink" href="#post--api-favourites_spots-" title="Permalink to this definition">¶</a></dt>
<dd><p>Add spot to favourites</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>spot</strong> &#8211; pk value of spot</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Request Headers:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.8">Authorization</a> &#8211; must provide token to authenticate or be session authenticated</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Example CURL request</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre>curl -X POST http://127.0.0.1:8000/api/favourites_spots/ -H &#39;Content-Type:application/json&#39; -H &#39;Authorization: Token 66445bc0e3a422f377129ddd79e8dd384e4d8a4a&#39; -d &#39;{&quot;spot_pk&quot;:5}&#39;
</pre></div>
</div>
<p><strong>Example response</strong>:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Status Codes:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.5">404 Not Found</a> &#8211; <p>There is no spot with given id</p>
<div class="highlight-json"><div class="highlight"><pre>{&quot;detail&quot;:&quot;Not found&quot;}%}
</pre></div>
</div>
</li>
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.5">304 Not Modified</a> &#8211; <p>The spot is already in users favourites</p>
<div class="highlight-json"><div class="highlight"><pre><span class="p">{</span><span class="nt">&quot;detail&quot;</span><span class="p">:</span><span class="s2">&quot;This spot is already in your favourites&quot;</span><span class="p">}</span>
</pre></div>
</div>
</li>
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.2">201 Created</a> &#8211; <p>The spot was sucessfully added to favourites</p>
<div class="highlight-json"><div class="highlight"><pre><span class="p">{</span><span class="nt">&quot;detail&quot;</span><span class="p">:</span><span class="s2">&quot;Added Pardon to tu to favourites&quot;</span><span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="delete-spot-from-favourites">
<h2>delete spot from favourites<a class="headerlink" href="#delete-spot-from-favourites" title="Permalink to this headline">¶</a></h2>
<dl class="delete">
<dt id="delete--api-favourites_spots-(int-pk)-">
<tt class="descname">DELETE </tt><tt class="descname">/api/favourites_spots/</tt><big>(</big><em class="property">int: </em><em>pk</em><big>)</big><tt class="descname">/</tt><a class="headerlink" href="#delete--api-favourites_spots-(int-pk)-" title="Permalink to this definition">¶</a></dt>
<dd><p>required fields:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>pk</strong> &#8211; pk of favourites item</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Request Headers:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.8">Authorization</a> &#8211; must provide token to authenticate or be session authenticated</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Example CURL request</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre>curl -X DELETE http://127.0.0.1:8000/api/favourites_spots/38/ -H &quot;Authorization: Token 66445bc0e3a422f377129ddd79e8dd384e4d8a4a&quot;
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="ratings-list">
<h2>ratings list<a class="headerlink" href="#ratings-list" title="Permalink to this headline">¶</a></h2>
<dl class="get">
<dt id="get--api-ratings-">
<tt class="descname">GET </tt><tt class="descname">/api/ratings/</tt><a class="headerlink" href="#get--api-ratings-" title="Permalink to this definition">¶</a></dt>
<dd><p>returns all ratings</p>
<p><strong>Example CURL request</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre>curl -X GET http://127.0.0.1:8000/api/ratings/
</pre></div>
</div>
<p><strong>Example response</strong>:</p>
<div class="highlight-json"><div class="highlight"><pre><span class="p">[</span>
    <span class="p">{</span>
        <span class="nt">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://127.0.0.1:8000/api/ratings/34/&quot;</span><span class="p">,</span>
        <span class="nt">&quot;is_enabled&quot;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
        <span class="nt">&quot;friendly_rate&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
        <span class="nt">&quot;spot&quot;</span><span class="p">:</span> <span class="s2">&quot;http://127.0.0.1:8000/api/spots/6/&quot;</span><span class="p">,</span>
        <span class="nt">&quot;spot_pk&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
        <span class="nt">&quot;facilities&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;snacks&quot;</span><span class="p">:</span> <span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="nt">&quot;dedicated_dogs_menu&quot;</span><span class="p">:</span> <span class="s2">&quot;False&quot;</span><span class="p">,</span>
            <span class="nt">&quot;fresh_water&quot;</span><span class="p">:</span> <span class="kc">null</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="nt">&quot;url&quot;</span><span class="p">:</span> <span class="s2">&quot;http://127.0.0.1:8000/api/ratings/35/&quot;</span><span class="p">,</span>
        <span class="nt">&quot;is_enabled&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
        <span class="nt">&quot;friendly_rate&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nt">&quot;spot&quot;</span><span class="p">:</span> <span class="s2">&quot;http://127.0.0.1:8000/api/spots/6/&quot;</span><span class="p">,</span>
        <span class="nt">&quot;spot_pk&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
        <span class="nt">&quot;facilities&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="nt">&quot;snacks&quot;</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
            <span class="nt">&quot;dedicated_dogs_menu&quot;</span><span class="p">:</span> <span class="s2">&quot;True&quot;</span><span class="p">,</span>
            <span class="nt">&quot;fresh_water&quot;</span><span class="p">:</span> <span class="s2">&quot;False&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="rate-spot">
<h2>rate spot<a class="headerlink" href="#rate-spot" title="Permalink to this headline">¶</a></h2>
<dl class="post">
<dt id="post--api-ratings-">
<tt class="descname">POST </tt><tt class="descname">/api/ratings/</tt><a class="headerlink" href="#post--api-ratings-" title="Permalink to this definition">¶</a></dt>
<dd><p>User can rate each spot only once. If user&#8217;s rating for given spot already exists, we do not&#8217;t add next rating but update the exisitng one.</p>
<p>We return the <cite>new_score</cite> which is calculated average rating from all ratings for  rated spot.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>spot_pk</strong> &#8211; pk of spot to be rated</li>
<li><strong>friendly_rate</strong> &#8211; integer 1-5</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name" colspan="2">Request Headers:</th></tr>
<tr class="field-even field"><td>&nbsp;</td><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.8">Authorization</a> &#8211; must provide token to authenticate or be session authenticated</li>
</ul>
</td>
</tr>
</tbody>
</table>
<p><strong>Example CURL request</strong>:</p>
<div class="highlight-http"><div class="highlight"><pre>curl -X POST http://127.0.0.1:8000/api/ratings/ -H &#39;Content-Type:application/json&#39; -H &#39;Authorization: Token 3a2d9ee2cfaefea6d073a11641c08152db2b9a04&#39; -d &#39;{
  &quot;spot_pk&quot;: 6,
  &quot;friendly_rate&quot;: 4,
  &quot;is_enabled&quot;: true,
  &quot;facilities&quot;: {
    &quot;snacks&quot;: true,
    &quot;dedicated_dogs_menu&quot;: false,
    &quot;fresh_water&quot;: null
  }
}&#39;
</pre></div>
</div>
<p><strong>Example response</strong>:</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Status Codes:</th><td class="field-body"><ul class="first last simple">
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.4.5">404 Not Found</a> &#8211; <p>There is no spot with given id</p>
<div class="highlight-json"><div class="highlight"><pre><span class="p">{</span><span class="nt">&quot;detail&quot;</span><span class="p">:</span><span class="s2">&quot;Not found&quot;</span><span class="p">}</span>
</pre></div>
</div>
</li>
<li><a class="reference external" href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.2.1">200 OK</a> &#8211; <p>sucessfully added new rating or updated the exisitng one</p>
<div class="highlight-json"><div class="highlight"><pre><span class="p">{</span><span class="nt">&quot;new_score&quot;</span><span class="p">:</span><span class="mf">3.0</span><span class="p">,</span><span class="nt">&quot;detail&quot;</span><span class="p">:</span><span class="s2">&quot;Rating added!&quot;</span><span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="google_places_api.html" class="btn btn-neutral float-right" title="Google Places API"/>Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="devops.html" class="btn btn-neutral" title="DevOps"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Andrzej Kostanski andilabs.
    </p>
  </div>

  <a href="https://github.com/snide/sphinx_rtd_theme">Sphinx theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>
</footer>
        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>
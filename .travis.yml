sudo: true
dist: trusty
language: python
python:
- '3.5'
env:
  matrix:
  - DJANGO_VERSION=2.0.2
  - DJANGO_SETTINGS_MODULE='better_spots.unittesting'
  global:
  - secure: hcf0CvszQD/MfcLWYIwB6PVLfa76bMwC6Bx3u0o7f+xlz04UGuEi+iJn/ugp99TABxLSBsCm5K1ZAXgYWWUfMbHE2SKlhcHI+wtY4tjybMXgnGjI7td9UTyEqOgia10UwQchf1Nei4jT8LDMsdz4bGA8Zvbphus3lk2fEhdfPSTXeUw5SQ3ggEhiEDd9Cghzz+yZ8K2oqMfz9ILmg/yDBYEQHTRDKDPWFwP+HXxAz3bdzyKvigxJc3t3LWGjZEPFGtRT6/Q4iEZ1g1H8IZXVaRVUcGOvqzRzXhB/qpIuHPIuWEtrDHqy5p9URn4bGK77oROb25L1LX5F8L6rB2AUegMDM0J1sHmC3Kbq/r+8hJe4NW/54HxbbyEBd0Ml2hiEy4D74ndfctSDPwTfJUxEXXeYGc5ll6ObUjBxKOdX0urfCRxS6AEjopPp4AdWUDEKB0uqkpWCiQmKs6YDqCodv2ZSeW64ClzRG24YYVetO2b102AOg94jaOApxSv/eWrBfI5hTB+5v280/G9zXPTkYrsF/N7lGXYktvNtk3YV+4Bohz5c+zNcm9mFePelqXP3EfaiO7lr5UrtphsDJPbpMj8UuomouCibHF38CupghlvISGFzkVgqBTZOD3gVha5zW4/UF9M2otQ3mtxa3c4Ood1ceZnFBYRs3zgbmQZVEis=
  - secure: b3ZhYAyP7XkcAJExjIunoXxuB5SNmvZPPzVsZzo+Qk9TYELN7b0o6z2m7fnnLJrJvoeDJrN9CLMbmtyEaOGi2KxvDSxo+2naPQbmndrcM8gO9/WLcZjjth9D6rpoor9Tiay3tEuJDCgNPBfMjjY6In85Y/1vBKAYtmoW517x2UTqyZjqrV0oQGavfcB1B23uPPjTvaE7j3olFfLiZyLDqoytxQVKsfNsF5Tee6CDBCjP2En39yQKUyLcHE80SMiNQMANneMSspLoLo/pEbJN3l442fx01zlPBxdewD2tR/fhaesYwaYZuetLdowA0BBeJHorYKlDqWgmASB9LL4oKYokiBvfp8t+wgnjOZhNfMv7m9P+ZxgGDbfGm69zXCWWRzO6OejCsfdd7ZhzztaeW5TbfekvYq6lCgFC/wdBRnlY4Eoi8rYjRDBssUtcRKgCQyTIN/+L+BucEvjLl0GK1GPkn9N6EFhNZWuvqMHD1ookJ413HgM03yGmHgQkGMKaHjcTdFPyjv/p5m6sNr7Lp/pNc4es/Fc9RzTldzJsV11cPwUpNcv8wV20NOeOHgfeMfJ4FTwGqERZTLuz8L9eMR4mnMU+631QPUg/3zHMNJ40z46Bcai3U0zTbB0lXIUrm/88iO2nVgaWL4jMHQaa+Zjqq3iD0dTlrfibf6YMVi4=
  - secure: YigN2LmoDN0i/+qrHeGKT1beT7+QRRyi2nxZ+QJgq0DRIuY4//xEFOKz3/9DJp1OGYJ9Eq4m6yomRnzIyNEnKqInQ4l1TEmc8CGjt6fxybHDbR+PmDPmLZHCZ+tC31KmzMdZiTDmshhmiiHpbeiHQrPlskjNKmo2DqypsHgz768PoM0i9U/6mQTAEW2u1cG87sJGvOCWAvbhVlUEZwub97Q2s8y3Y5/U0N2n3QhjfweOqnxknHt6tI+ICVP23r9S7xxiuRMC/p+tmomHwoLI5x70I2m+N11dwfzx8YWpRQ9rXmPaqgacaq4tDZVHSvquzHr9AuZD03VvKZU2rbgtLs1D3ISHHlGQwlKF0XT4U3IXKjCjTw858ADQqJwAibeeWtyr28eKX84QWRtrb7IRZdnZhzAFWVYMKx4w2PnG2MXI8mdeujVWX0AOsp9f3kh1OaOji6/1j1kf47O9fHv+SAvzHfn424soomNoM5iDCE6a8k/QgkCp8u8I1R0oAInqtt+U46HTzRmRJhgH9+OK11/FJzZ4BqLR1X3VAREEwC0gN86OeAoK5tp8Rm1IHZlXbwJxgxvp3V84Pf+gY7AjetJS9+3bssqitIH+uxFVv4i/yRwzVIPVE3KbBJJsrLM8Fwkm5RFlnGSG5ruPGZWsvdlP4IzOX0ZXiATxU28XZEo=
  - secure: fzBwT3meojJB46qM7BImjr9/j7AYyNqqLRzR2kJhFyPijKviL31rLJUHqal18fIoEBTctDNcWytporokBQLAjX2qVB7XM3Ueih7N72GqqHcYTNNRLK7gYz56nIKp24ChJXHWwyLoWqDrGovTcA4RRFRhrGV+spJ3jwZ3nlzMP3yRqML5xcjrQspTrMPys1R/8jOhG7aKGVV72PQ6MaqC50Xa3xvFpHBVc3IpX6n6n3B43JzlUXvxVVpo7s+F/kJl8m3Rh07+B59h6QYrsP3csWj1u7rh74F8+gGevpIZZVbl/maYJV7tuKmznpvvMsdTM/3dH5EPbhjRHgCXCMiulkIFPi32kqrMtrBrUdUcKovAMMHfcUz+8kNKG35iuumEmTPwvIKqWCRxEI45JB1kv4U7QlrmpgzQtdeEIKb92I/1LpP0PQV/OHty8+UHF+cqvIbXBfFeob720kIsWqSu6BmtXYu5TnE+bAg3vwu1JDKE3cymUZV1k6x3PEhxS05A+Fv7exosqTPQBlEJvYR9WIBctYBPh7M0nudHHarYZgNmYk17SiIe0OPmG7STzMRVzvl8Px3bDQfMIK8XO2PGdh+voK29yGjIqHzpubAVlrPgqB2MAC2h0J7pmKrhC3gB1q48QwFHjwixfOeNzYdbrlQIqQJhJ8jOK9BkwGQyIdc=
  - secure: Bx9dG7oUXwLQnBz0rlAPQjbL/1kLVjD9RbB97JAjq1qrHJNXB0FtEfTtMdnJngU2uXSKWfL8CmUdXK3LmXZ+MWXSDYF4OI0A/BMR/6flcKyqAKSQQni+FgtbpdN2gqyMzdHpAAG/wVe4xquyAIIyDsKSJxCHZNHfef0xOOD02w0jWhUXBI5mclWfx+y6B5Cv4oZkyoOXLRLWYxDOs61zoDrET4ceseKr0tn5Vs4SfLSAdvepx+oalTCkk0cPoS/CmE2ZRlxZr0oigN97OWIPeQKHm8Dm3jKJLgNMfccVFE89LnJArTbMrkMKLmUJzxS+PaUqpBQYVfFJ5N/ck2Yh/frMVn5IYPnM+6lhA+lS28liDPcLn9On5AzUHhKEMrwcGqGF1utqAmM7o7n/rP3XbriRhvtenTSDWfzVQh4i6WKssBbGYDOT0aKazhg0jisuqvn/LEgC5mg3uuhB/lKwolBF6e5z3QQHTXsKY2BWLEcKoXVl2O1o7yQJFbJ3Jn7nHQUHw0DkeWMvuNTnVDquwsjmojiSHkBonhFoMs8hqUyazziloRPSV1Tpt0FyafSSw7gSOCH3WITFBvmMW86PLVUjig7317AEOh8z2PVpXNJBDyvE8lMrDYNmHnKOHSbf/J9BHOsL8yozH++SBmDXlWB0UmibCQAyq56eqRQyKV8=
  - secure: mkUu7HEn5n2MVUot6gENLA+zMBAzMFKUGIzVHABBQb0ZWz3r4Yq51GmDozwRec+tHqx2GxfD8DCXxlcdTBcheFU3Vxr5UVHkQuwbWNjDKwOkstO0SKUl2KDaqDfbhYl4VxNpUIYhTl+zYccBhFMGo5L3zgAHxI/YUsGueDHUvrFH8vPeK8Xp1YHOXPaSCpGdliQUDUqtiMHHxSqtkiF/jnUwOGSPiZkfqG6/C/r28D1d4Dvv+PemFhNFPylTrLckZzyjZfIb4SNEPr6x0JyTpyL7BVz8eCpXasJ534hwfNcJJGm7u6DJ0uSmP3mBLXFtqqzTU117BkifVWv34//6i7xGeKCHmNUE8TUJ1i5W8x7jPObXo1BTgsE0iZtathX0VwrVGIWpizYps+Ss+41StiVtyVyH4JkAsC0H6oMOc1jO71dEh6Vt623M+Lu7XoQxOqTrPA89QxIpc8Z2um0W8lNm7onCo+AK08CrVAoGl2jvxGY0nISFMy8hNU918DCm8bAtaYLaW0962Gm5E0Zwde/YGBojQ2RzSSN/vWin2XbcQGxTdePiA/OmbeR4Y39UP797mOEB0khSCcc3NBFCxIgCrNsXMMZBbhkwKRZ07lQ5swrZcYk39clCe8eiTBoXaXiQn0vUCO217H7CqFJAAh9MHSFU+GeNauotpetL2UU=
  - secure: Y46+PQu/E23cB6NvmMCLe8vS5OOvQUuIp/72S+lrqirFJIx2FyjkOo6gvVA9KerzyP1KOL+2Otb3pqPucc3ecpHhN8n8r8V55TncFfn2VX7dob8luqS5SDOdJruAeFTAAmaRwOHpZAp8AOboglSeaZPQZHqRxK0es1pvbC7bLvtocJX9iACmGve3r5aSh7IaISfCU/vp3xpRp3E7IFS955CyiT3bSGsfX/4GgOcGfXiDEU/uuSzxswbLQxZoXc2WzNUt7yZLMMV+w8Dri0dxzCVySwULBLh/Ah9xMM+ZxH9gCP7w8Qwvx3FAUjgk/BXAdfqKs87MVVsTcqegUoXuEQ91y1zDszKigLIPItGYAXHIyR2pBlHhpdsR6zKlcqqXDUDyZwKrdsJ7N0YF0n9nlZWvpMyo4thwBsSH6nZhLp7g+PSJTgHjHm+XKLC1xx4Jacpf2sWDrRuQVvMvDoRYhQT/Hx63W7ixV9N23b07JmrfryehkO6jCwLHTOj2e+5xd5VKx/Jsbtdn9EMSdRsCwx3RURGXGt0lTaLFubbbhFKqtDcCFJSOnWupSdjLqD7XxUdctMnM02EFQSXr8qkaYxR28ojWQZejo87afnY6gihp4GW8OPFe9PDIryH1y9a3aQSVrL90rU8eLY31RuFZDEa/3huKoXjNH1IyZ2gaysA=
  - secure: QZTVGF1vMfNJp7PZ82p+SeCO9AK0wtWdL+/nol5ujqCqKBGWJtMJQEb7Wl34KaHZqBifXs/IQS5uw9EP3St7wZy2TbqHJLP7ozoPHbBTTacnenyToPabB/M2tWCTbPlrEDjExfnAXNeX0HETyzCXgipux6vwE2kI9QifILHtGSBReLk4P7Wrr3imfra84SxyA5Rqa02sWOin6qRaUOf07AP8pfwU0wgxB7Q6dCZaGcfMB9kTJ4/OFOcWbUuTC+lvCFazkWKkDcNAs+WNn5L7k1HFEusMohcHGoU+62vBL3eIhHd53ICr9GCERAUUIuOxp8kRhLGAv3XptK4pYGoLUkYvcOurk55GcAiGTZyd7DF5cRmCpN4+XMXjxM56S12Nyxx2C/DwSBCgkjrWeovAJ1MkoQ/oGEhZ098cmXCXI+I6nj9mQjXyp19F6CGG6kvwBjy7uQcWPG6KSonIWs6AFzHLNMv4/Pm0HOWvTGML4fLoxJpc7Bvluzfqx4aF1q8e2UK0kiZdw/nWIWhlRD2vZeOQhtGJFjUXBL6qetrx5RtGCdLTYEf86VogWpVaoFf8T6xBnQyes12AalQyzIHqtvHyPwJcVeIcY7CnrroYCj3Zl+KytlcyfFAyNlk5bhGqpn1dK/CIvg3uLxaO4/XMoI8mx1+KltBQG633hM8grsE=
  - secure: m2F77R13Z6EG8c+keZ19Hs2Y0G0mijDloy8hFGFHF/BNH6JTfhvLPZRJDh881JgFx69vJGd2pUNUkH4gnGP77oWGdSL/YEkHyf0G3Nu8LPgUzWCKd2HqT28emffeAXHCsZNadnN7WKJJuMT668cNOHXuuZ/igU95DsppVvAYV2rcfLBSeznlVO1G5kPob+cLZ9tBtSZk3TZGL+KQ3xs9BtG43jEXCT+1Vd3GMXnhISrNck3TDeRmxMIAtQtK+HhVRLYnJZEfQZD1CBumAts9HWcbgY+Ikur7oOFl8+r5rpUDnU9lcdq22CTa95xSg9216mZtC5saXzPApdb6EJvH7kTaqlhh/3F3dsDrt9GJ5w9TvsAaGfwhCVqakz1ghhPOBJfpCSi6ctxuJxGYTYigiXNITkTtlmZdXUEA7GKjvheaob+yIEtKVpnlmHpSuSrgfCqC5CfhC/JuOy+9OuX+/z74bs0l9FEJECAHguVE1G+68a42xBE7BvxIDJ+1w4feJWWnvGN7ZPTzZS0wSrH5RgPXqkbDylWWcvBRQDttfbXr8ahIyAKxqQfgEWjtR9suMSIpT67QtN/7Qx4ckrjXkiyreOu1Hriz7VVP8UNDsIqwcmEH5+po12onng+HOFUn8qCgKqhPgJy2KF+AxO9Vdua4kFDAacVGyj0LakVssj0=
  - secure: WgCuIwfXWsUNEE8OJvOH0HV7SlbNTBXRjqluUXQuoudWXO3XYXKVWw/k/rV1AgepglQ3HHrlNy+KCieibYG04XI6pXqBX2OEUHFS9VoqJNkbVe2SverU5CE7F9XiYUd/uqlJzajuHwPq+eNXwfjd/ew5dSWdI85wHiOlLT9YYUJSKGsZhF+7CjldfUsEflaFWwviHOUHFWQq9FdyMve2tYUIGC7EQ7ZmyVzRpnzyBIi9l2U4Y+Qe35alUpaME4nV3/tSs64SyeetNTg0a3yM+9twlwAntllsXom+WvdKT6pVEadMCH1i9aox4YWuvyG1GxO9CcZ6QY3Oz0kN4UGzYvtxQv5v4XYq/IoEmZ4dHPLbzdA1HpJnmoqCgYuw/JOYMOeNz2ziUXnurHtIA94D2C6Zv4WBYPM3uaeFqhmi3xqks8R0wJl3BX2cwHmAukFf7sv6RFCNvXbNZEQHDaO4wo/0nW1v59q05ot7jq6OVxw/95BswSOJCYzcHx5tO9tLrqGzv+OHAhvHPUKX+f625pQWPibNtf27HqejptnYRXfW4HkZ2oYYWoXOklRoFk5nfgbG+DgUyIqncCROvksJevrpfjW+I5PJo/NF0pax0hCVW/DLAaorYivaHE3ycDItzBoIdKQ4lrKtdAvt1olvWNdu9VGs548ZN2y2afWFKf4=

install:
- pip install -r requirements.txt
addons:
  postgresql: '9.6'
services:
- postgresql
before_install:
- sudo apt-get update -qq
- sudo apt-get -y install python-software-properties
- sudo apt-get -y install mapserver-bin
- sudo apt-get -y install gdal-bin
- sudo apt-get -y install cgi-mapserver
- sudo apt-get -y install postgresql-9.6
- sudo apt-get -y install postgresql-client-9.6
- sudo apt-get -y install postgresql-server-dev-9.6
- sudo apt-get -y install postgresql-plperl-9.6
- sudo apt-get -y install postgresql-9.6-postgis-2.3
- sudo apt-get -y install postgresql-9.6-postgis-2.3-scripts
before_script:
- psql -c 'create database better_spots;' -U postgres
script:
- python manage.py migrate --noinput  --settings=better_spots.travis_ci
- python manage.py test  --settings=better_spots.travis_ci
notifications:
  email:
    recipients:
    - andi@andilabs.com
    on_success: always
    on_failure: always

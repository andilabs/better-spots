{% extends "www/base.html" %}
{% load custom_tags_and_filters %}
{% load static %}
{% block title %}
    {{site_title}} - {% settings_value "SPOT_PROJECT_NAME" %} - {% settings_value "SPOT_PROJECT_SLOGAN" %}
{% endblock %}


{% block extra_head %}
    {{ form.media }}
{% endblock %}

{% block content %}
    <link rel="stylesheet" href="{% static "external/chosen_v1.4.2/chosen.css" %}">
<h2 class="titles">
  <span class="fa fa-{{icon_type}} fa-2x spot_project_color"></span> {{site_title}}!
</h2>
<div class="row">
  {% for spot in spots %}
    <div class="col-sm-6 col-md-4">
      <div class="thumbnail">

        {% if spot.is_certificated %}
          <img src='{% settings_value_static "SPOT_PROJECT_NAME" %}/certificate_small.png' class="enablence-symbol">
        {% else %}
          {% if spot.is_enabled %}
            <img src='{% settings_value_static "SPOT_PROJECT_NAME" %}/marker-ok.png' class="enablence-symbol">
          {% elif spot.is_enabled == False %}
            <img src='{% settings_value_static "SPOT_PROJECT_NAME" %}/marker-bad.png' class="enablence-symbol">
          {% else %}
            <img src='{% settings_value_static "SPOT_PROJECT_NAME" %}/marker-undefined.png' class="enablence-symbol">
          {% endif %}
        {% endif %}


        <a href="{{spot.get_url}}">
        {% if spot.thumbnail_venue_photo %}
          <img src="{{spot.thumbnail_venue_photo}}" class="venue_photo{% if spot.is_certificated %} certificated {% else %}{% if spot.is_enabled %} ok {% else %} bad{% endif %}{% endif %}" style="width: 350px; height: 150px;">
        {% else %}
          <img data-src="holder.js/350x150/text: no photo" alt="..." class="venue_photo{% if spot.is_certificated %} certificated {% else %}{% if spot.is_enabled %} ok  {% elif spot.is_enabled == False %} bad {% else %} undefined {% endif %}{% endif %}">
        {% endif %}
        </a>

        <div class="caption">
            <h4>
              <a href="{{spot.get_url}}" title="{{ spot.name }}">{{ spot.name|upper|truncatechars:27 }}</a>
            </h4>

            <div>
              <div class="col1">
                <p>{{ spot.address_city}}, {{spot.address_street}} {{spot.address_number}}<br>
                {% if spot.phone_number %}
                {{spot.phone_number}}
                {% else %}
                <br>
                {% endif %}
                </p>
                 {% include "www/partials/spot_rating_stars_ui.html" with spot=spot %}
              </div>
              <div class="col2">
                {% include "www/partials/spot_favourites_heart_it_ui.html" with spot=spot user_favourites_spots_pks=user_favourites_spots_pks %}
              </div>
            </div>

        </div>

      </div>
    </div>
  {% endfor %}
</div>

{% if is_paginated %}
  <ul class="pagination pagination-centered">
    {% if page_obj.has_previous %}

        <li>
          <a href="?page={{ page_obj.previous_page_number }}">
            <
          </a>
        </li>
    {% endif %}


    {% if page_obj.has_next %}
        <li>
          <a href="?page={{ page_obj.next_page_number }}">
            >
          </a>
        </li>
        </li>
    {% endif %}
  </ul>
{% endif %}

{% endblock %}

{% block scripts %}
  {{ block.super }}
  <script type="text/javascript" src="{% static "js/spots_list.js" %}"></script>
  <script src='{% static "external/chosen_v1.4.2/chosen.jquery.js" %}' type="text/javascript"></script>
  <script src='{% static "external/chosen_v1.4.2/docsupport/prism.js" %}' type="text/javascript" charset="utf-8"></script>
  <script type="text/javascript">
    var config = {
      '.chosen-select'           : {},
      '.chosen-select-deselect'  : {allow_single_deselect:true},
      '.chosen-select-no-single' : {disable_search_threshold:10},
      '.chosen-select-no-results': {no_results_text:'Oops, nothing found!'},
      '.chosen-select-width'     : {width:"95%"}
    }
    for (var selector in config) {
      $(selector).chosen(config[selector]);
    }
  </script>
  </form>
{% endblock scripts %}
